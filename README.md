# C# Windows Kernel Driver

A C# Windows Kernel Driver sample built with [blaft](https://github.com/bflattened/bflat) and bflat/zerolib. Since zerolib doesn't contain a memory deallocation stub routine (like C's free()), there is memory leaks and due this there is no practical use for coding drivers with it yet.
If you want to build it, you will need to build bflat layouts then get an updated [EWDK (Enterprise WDK) image](https://learn.microsoft.com/en-us/windows-hardware/drivers/other-wdk-downloads#download-previous-versions-of-the-ewdk) and copy its WDF and Kernel x64 libraries (`/Program Files/Windows Kits/<windows-version>/Lib/**/*.lib`) to `layouts/<target-bflat-layout>/lib/windowskernel/x64/`. Then you can build the `CSharpDriver.sys` with `bflat build ./samples/WindowsKernelDriver/Driver.cs ./samples/WindowsKernelDriver/Win32.cs --stdlib:zero --os:windowskernel -o:CSharpDriver.sys`. To debug it, try some debugger like WinDbg.